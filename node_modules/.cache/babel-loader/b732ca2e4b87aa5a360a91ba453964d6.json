{"ast":null,"code":"var _jsxFileName = \"/home/hazo/Desktop/blog-reactjs/src/Page/Post/ListPost.jsx\";\nimport React from 'react';\nimport posts from '../../services/post/Postlist';\nimport PostItem from '../Post/PostItem';\nimport { Pagination, PaginationItem, PaginationLink, Button } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\nimport ModalPost from './ModalPost';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fakeData = [{\n  post_id: '1',\n  title: 'Lorem Ipsum',\n  content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n  user: {\n    user_name: 'minh'\n  }\n}, {\n  post_id: '2',\n  title: 'Lorem Ipsum',\n  content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n  user: {\n    user_name: 'minh'\n  }\n}, {\n  post_id: '3',\n  title: 'Lorem Ipsum',\n  content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n  user: {\n    user_name: 'minh'\n  }\n}, {\n  post_id: '4',\n  title: 'Lorem Ipsum',\n  content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n  user: {\n    user_name: 'minh'\n  }\n}, {\n  post_id: '5',\n  title: 'Lorem Ipsum',\n  content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n  user: {\n    user_name: 'minh'\n  }\n}];\n\nclass ListPost extends React.Component {\n  constructor(props) {\n    super(props);\n    let locationSearch = this.props.location.search;\n    let searchParam = new URLSearchParams(locationSearch);\n    this.state = {\n      list_post: fakeData,\n      pageSize: 1,\n      total: 10,\n      currenPage: parseInt(searchParam.get('current_page') || 1),\n      visibleModal: false\n    };\n    this.doGetPostList = this.doGetPostList.bind(this); // this.renderPagination = this.renderPagination.bind(this);\n\n    this.setCurrentPage = this.setCurrentPage.bind(this);\n  }\n\n  componentDidMount() {\n    this.doGetPostList(this.state.currenPage);\n  }\n\n  async doGetPostList(offset) {\n    try {\n      this.setState({\n        loading: true\n      });\n      const result = await posts({\n        page_number: offset,\n        number_post_on_page: this.state.pageSize\n      });\n      console.log(\"result\", result);\n\n      if (result.err !== 0) {\n        console.log('loi');\n        return;\n      }\n\n      this.setState({\n        posts: result.data,\n        total: 100\n      });\n    } catch (e) {\n      console.log(e);\n    } finally {\n      this.setState({\n        loading: false\n      });\n    }\n  }\n\n  setCurrentPage(index) {\n    this.props.history.push(`?current_page=${index}`);\n    this.doGetPostList(index);\n  } // renderPagination() {\n  //     let pageNumber = [];\n  //     for (let i = 1; i <= Math.ceil(this.state.total / this.state.pageSize); i++) {\n  //         pageNumber.push(i);\n  //     }\n  //     return <Pagination aria-label=\"Page navigation example\">\n  //         <PaginationItem>\n  //             <PaginationLink first />\n  //         </PaginationItem>\n  //         <PaginationItem>\n  //             <PaginationLink previous />\n  //         </PaginationItem>\n  //         {\n  //             pageNumber.map((index) => (<PaginationItem key={index} onClick={() => this.setCurrentPage(index)}>\n  //                 <PaginationLink >\n  //                     {index}\n  //                 </PaginationLink>\n  //             </PaginationItem>))\n  //         }\n  //         <PaginationItem>\n  //             <PaginationLink next />\n  //         </PaginationItem>\n  //         <PaginationItem>\n  //             <PaginationLink last />\n  //         </PaginationItem>\n  //     </Pagination>\n  // }\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"danger\",\n        onClick: () => this.setState({ ...this.state,\n          visibleModal: !this.state.visibleModal\n        }),\n        children: \"Th\\xEAm b\\xE0i vi\\u1EBFt m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), this.state.list_post.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(PostItem, {\n          post: item\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 70\n        }, this);\n      }), this.renderPagination(), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ModalPost, {\n          onAddPostSuccess: () => this.setCurrentPage(1),\n          visible: this.state.visibleModal,\n          closeModal: () => this.setState({ ...this.state,\n            visibleModal: !this.state.visibleModal\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(ListPost);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/hazo/Desktop/blog-reactjs/src/Page/Post/ListPost.jsx"],"names":["React","posts","PostItem","Pagination","PaginationItem","PaginationLink","Button","withRouter","ModalPost","fakeData","post_id","title","content","user","user_name","ListPost","Component","constructor","props","locationSearch","location","search","searchParam","URLSearchParams","state","list_post","pageSize","total","currenPage","parseInt","get","visibleModal","doGetPostList","bind","setCurrentPage","componentDidMount","offset","setState","loading","result","page_number","number_post_on_page","console","log","err","data","e","index","history","push","render","map","item","renderPagination"],"mappings":"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","sourcesContent":["import React from 'react';\nimport posts from '../../services/post/Postlist';\nimport PostItem from '../Post/PostItem';\nimport { Pagination, PaginationItem, PaginationLink, Button } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\nimport ModalPost from './ModalPost';\nconst fakeData = [\n    {\n        post_id: '1',\n        title: 'Lorem Ipsum',\n        content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n        user: {\n            user_name: 'minh'\n        },\n    },\n    {\n        post_id: '2',\n        title: 'Lorem Ipsum',\n        content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n        user: {\n            user_name: 'minh'\n        }\n    },\n    {\n        post_id: '3',\n        title: 'Lorem Ipsum',\n        content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n        user: {\n            user_name: 'minh'\n        }\n    },\n    {\n        post_id: '4',\n        title: 'Lorem Ipsum',\n        content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n        user: {\n            user_name: 'minh'\n        }\n    },\n    {\n        post_id: '5',\n        title: 'Lorem Ipsum',\n        content: 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using , making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for  will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).',\n        user: {\n            user_name: 'minh'\n        }\n    }\n]\nclass ListPost extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let locationSearch = this.props.location.search;\n        let searchParam = new URLSearchParams(locationSearch)\n\n        this.state = {\n            list_post: fakeData,\n            pageSize: 1,\n            total: 10,\n            currenPage: parseInt(searchParam.get('current_page') || 1),\n            visibleModal: false\n        }\n\n        this.doGetPostList = this.doGetPostList.bind(this);\n        // this.renderPagination = this.renderPagination.bind(this);\n        this.setCurrentPage = this.setCurrentPage.bind(this);\n    }\n\n\n    componentDidMount() {\n        this.doGetPostList(this.state.currenPage);\n    }\n\n\n\n    async doGetPostList(offset) {\n        try {\n            this.setState({\n                loading: true,\n            });\n\n            const result = await posts({\n                page_number: offset,\n                number_post_on_page: this.state.pageSize,\n            });\n\n            console.log(\"result\", result);\n\n            if (result.err !== 0) {\n                console.log('loi');\n                return;\n            }\n\n            this.setState({\n                posts: result.data,\n                total: 100,\n            });\n        } catch (e) {\n            console.log(e);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    setCurrentPage(index) {\n        this.props.history.push(`?current_page=${index}`);\n        this.doGetPostList(index);\n    }\n\n\n    // renderPagination() {\n    //     let pageNumber = [];\n    //     for (let i = 1; i <= Math.ceil(this.state.total / this.state.pageSize); i++) {\n    //         pageNumber.push(i);\n    //     }\n    //     return <Pagination aria-label=\"Page navigation example\">\n    //         <PaginationItem>\n    //             <PaginationLink first />\n    //         </PaginationItem>\n    //         <PaginationItem>\n    //             <PaginationLink previous />\n    //         </PaginationItem>\n    //         {\n    //             pageNumber.map((index) => (<PaginationItem key={index} onClick={() => this.setCurrentPage(index)}>\n    //                 <PaginationLink >\n    //                     {index}\n    //                 </PaginationLink>\n    //             </PaginationItem>))\n    //         }\n    //         <PaginationItem>\n    //             <PaginationLink next />\n    //         </PaginationItem>\n    //         <PaginationItem>\n    //             <PaginationLink last />\n    //         </PaginationItem>\n    //     </Pagination>\n    // }\n\n\n    render() {\n\n        return (\n            <div className=\"container\">\n                <Button color=\"danger\" onClick={() => this.setState({ ...this.state, visibleModal: !this.state.visibleModal })}>Thêm bài viết mới</Button>\n                {this.state.list_post.map((item, index) => { return (<PostItem key={index} post={item} />) })}\n                 {this.renderPagination()} \n                <div>\n                    <ModalPost onAddPostSuccess={() => this.setCurrentPage(1)} visible={this.state.visibleModal} closeModal={() => this.setState({ ...this.state, visibleModal: !this.state.visibleModal })} />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(ListPost);"]},"metadata":{},"sourceType":"module"}