{"ast":null,"code":"var _jsxFileName = \"/home/hazo/Desktop/blog-reactjs/src/Page/Post/ListPost.jsx\";\nimport React from 'react';\nimport posts from '../../services/post/Postlist';\nimport PostItem from '../Post/PostItem';\nimport { Pagination, PaginationItem, PaginationLink, Button } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\nimport ModalPost from './ModalPost'; // const data = [\n//     {\n//         post_id: '1',\n//         title: 'asdasd',\n//         content: 'asdsad',\n//         user: {\n//             user_name: 'asdasd'\n//         },\n//     },\n// ]\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ListPost extends React.Component {\n  constructor(props) {\n    super(props);\n    let locationSearch = this.props.location.search;\n    let searchParam = new URLSearchParams(locationSearch);\n    this.state = {\n      list_post: data,\n      pageSize: 1,\n      total: 10,\n      currenPage: parseInt(searchParam.get('current_page') || 1),\n      visibleModal: false\n    };\n    this.doGetPostList = this.doGetPostList.bind(this);\n    this.renderPagination = this.renderPagination.bind(this);\n    this.setCurrentPage = this.setCurrentPage.bind(this);\n  }\n\n  componentDidMount() {\n    this.doGetPostList(this.state.currenPage);\n  }\n\n  async doGetPostList(offset) {\n    try {\n      this.setState({\n        list_post: data,\n        loading: true\n      });\n      const result = await posts({\n        page_number: offset,\n        number_post_on_page: this.state.pageSize\n      });\n      console.log(\"result\", result);\n\n      if (result.err !== 0) {\n        console.log('loi');\n        return;\n      }\n\n      this.setState({\n        posts: result.data,\n        total: 100\n      });\n    } catch (e) {\n      console.log(e);\n    } finally {\n      this.setState({\n        loading: false\n      });\n    }\n  }\n\n  setCurrentPage(index) {\n    this.props.history.push(`?current_page=${index}`);\n    this.doGetPostList(index);\n  }\n\n  renderPagination() {\n    let pageNumber = [];\n\n    for (let i = 1; i <= Math.ceil(this.state.total / this.state.pageSize); i++) {\n      pageNumber.push(i);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Pagination, {\n      \"aria-label\": \"Page navigation example\",\n      children: [/*#__PURE__*/_jsxDEV(PaginationItem, {\n        children: /*#__PURE__*/_jsxDEV(PaginationLink, {\n          first: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PaginationItem, {\n        children: /*#__PURE__*/_jsxDEV(PaginationLink, {\n          previous: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), pageNumber.map(index => /*#__PURE__*/_jsxDEV(PaginationItem, {\n        onClick: () => this.setCurrentPage(index),\n        children: /*#__PURE__*/_jsxDEV(PaginationLink, {\n          children: index\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 44\n      }, this)), /*#__PURE__*/_jsxDEV(PaginationItem, {\n        children: /*#__PURE__*/_jsxDEV(PaginationLink, {\n          next: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PaginationItem, {\n        children: /*#__PURE__*/_jsxDEV(PaginationLink, {\n          last: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"danger\",\n        onClick: () => this.setState({ ...this.state,\n          visibleModal: !this.state.visibleModal\n        }),\n        children: \"Th\\xEAm b\\xE0i vi\\u1EBFt m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), this.state.list_post.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(PostItem, {\n          post: item\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 70\n        }, this);\n      }), this.renderPagination(), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ModalPost, {\n          onAddPostSuccess: () => this.setCurrentPage(1),\n          visible: this.state.visibleModal,\n          closeModal: () => this.setState({ ...this.state,\n            visibleModal: !this.state.visibleModal\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(ListPost);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/hazo/Desktop/blog-reactjs/src/Page/Post/ListPost.jsx"],"names":["React","posts","PostItem","Pagination","PaginationItem","PaginationLink","Button","withRouter","ModalPost","ListPost","Component","constructor","props","locationSearch","location","search","searchParam","URLSearchParams","state","list_post","data","pageSize","total","currenPage","parseInt","get","visibleModal","doGetPostList","bind","renderPagination","setCurrentPage","componentDidMount","offset","setState","loading","result","page_number","number_post_on_page","console","log","err","e","index","history","push","pageNumber","i","Math","ceil","map","render","item"],"mappings":"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","sourcesContent":["import React from 'react';\nimport posts from '../../services/post/Postlist';\nimport PostItem from '../Post/PostItem';\nimport { Pagination, PaginationItem, PaginationLink, Button } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\nimport ModalPost from './ModalPost';\n// const data = [\n//     {\n//         post_id: '1',\n//         title: 'asdasd',\n//         content: 'asdsad',\n//         user: {\n//             user_name: 'asdasd'\n//         },\n//     },\n// ]\nclass ListPost extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let locationSearch = this.props.location.search;\n        let searchParam = new URLSearchParams(locationSearch)\n\n        this.state = {\n            list_post: data,\n            pageSize: 1,\n            total: 10,\n            currenPage: parseInt(searchParam.get('current_page') || 1),\n            visibleModal: false\n        }\n\n        this.doGetPostList = this.doGetPostList.bind(this);\n        this.renderPagination = this.renderPagination.bind(this);\n        this.setCurrentPage = this.setCurrentPage.bind(this);\n    }\n\n\n    componentDidMount() {\n        this.doGetPostList(this.state.currenPage);\n    }\n\n\n\n    async doGetPostList(offset) {\n        try {\n            this.setState({\n                list_post: data,\n                loading: true,\n            });\n\n            const result = await posts({\n                page_number: offset,\n                number_post_on_page: this.state.pageSize,\n            });\n\n            console.log(\"result\", result);\n\n            if (result.err !== 0) {\n                console.log('loi');\n                return;\n            }\n\n            this.setState({\n                posts: result.data,\n                total: 100,\n            });\n        } catch (e) {\n            console.log(e);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    setCurrentPage(index) {\n        this.props.history.push(`?current_page=${index}`);\n        this.doGetPostList(index);\n    }\n\n\n    renderPagination() {\n        let pageNumber = [];\n        for (let i = 1; i <= Math.ceil(this.state.total / this.state.pageSize); i++) {\n            pageNumber.push(i);\n        }\n        return <Pagination aria-label=\"Page navigation example\">\n            <PaginationItem>\n                <PaginationLink first />\n            </PaginationItem>\n            <PaginationItem>\n                <PaginationLink previous />\n            </PaginationItem>\n            {\n                pageNumber.map((index) => (<PaginationItem key={index} onClick={() => this.setCurrentPage(index)}>\n                    <PaginationLink >\n                        {index}\n                    </PaginationLink>\n                </PaginationItem>))\n            }\n            <PaginationItem>\n                <PaginationLink next />\n            </PaginationItem>\n            <PaginationItem>\n                <PaginationLink last />\n            </PaginationItem>\n        </Pagination>\n    }\n\n\n    render() {\n\n        return (\n            <div className=\"container\">\n                <Button color=\"danger\" onClick={() => this.setState({ ...this.state, visibleModal: !this.state.visibleModal })}>Thêm bài viết mới</Button>\n                {this.state.list_post.map((item, index) => { return (<PostItem key={index} post={item} />) })}\n                {this.renderPagination()}\n                <div>\n                    <ModalPost onAddPostSuccess={() => this.setCurrentPage(1)} visible={this.state.visibleModal} closeModal={() => this.setState({ ...this.state, visibleModal: !this.state.visibleModal })} />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(ListPost);"]},"metadata":{},"sourceType":"module"}